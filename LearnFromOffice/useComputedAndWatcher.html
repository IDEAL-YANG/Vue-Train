<!DOCTYPE html>
<html>
<head>
	<title>è·Ÿç€å®˜æ–¹ä½¿ç”¨Computedå’ŒWatcher</title>
	<script src=".././vue.js"></script>
</head>
<body>

	<div id="example" align="center">
		<p>å¼€å§‹ message æ˜¯ï¼š"{{ message }}"</p>
		<p>è®¡ç®—ç¿»è½¬å message æ˜¯ï¼š"{{ reversedMessage }}"</p>
		<p>é€šè¿‡methodç¿»è½¬å message æ˜¯ï¼š"{{ reversedMessageByMethod() }}"</p>
		<p>
			<input type="text" name="" v-model="message">
		</p>

		<hr>
		<p>
			<div>{{ fullName }}</div>
		</p>
		<p>
			<input type="text" name="" v-model="firstName"><br>
			<input type="text" name="" v-model="lastName"><br>
			<input type="text" name="" v-model="fullName">
		</p>

		<hr>

		<p>
			é—®ä¸€ä¸ªç­”æ¡ˆæ˜¯yes/noçš„é—®é¢˜ï¼š
			<input type="text" name="" v-model="question">
			<p>{{ answer }}</p>
			<p><img :src="ansImageUrl"></p>
		</p>

		<hr>
		<p>
			<a :href="pageUrl">Next Page</a>
		</p>

	</div>

	<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
	<script type="text/javascript">
		var vm = new Vue({
			el: "#example",
			data: {
				message: "Welcome!",
				firstName: 'Foo',
				lastName: 'Bar',
				// fullName: 'Foo Bar',
				question: '',
				answer: 'ä½ è¦å…ˆæå‡ºé—®é¢˜ï¼Œæˆ‘æ‰èƒ½ç»™ä½ ç­”æ¡ˆï¼',
				ansImageUrl: '',
				pageUrl: './useClassAndStyle.html'
			},
			computed: {
				reversedMessage: function () {
					return this.message.split('').reverse().join('')
				},
				// fullName: function () {
				// 	return this.firstName + ' ' + this.lastName
				// }
				fullName: {
					get: function () {
						return this.firstName + ' ' + this.lastName
					},
					set: function (newValue) {
						var names = newValue.split(' ')
						this.firstName = names[0]
						this.lastName = names[names.length - 1]
					}
				}
			},
			methods: {
				reversedMessageByMethod: function () {
					return this.message.split('').reverse().join('')
				},
				getAnswer: function () {
					if (this.question.indexOf('ï¼Ÿ') === -1) {
						this.answer = 'é—®é¢˜éœ€è¦åŒ…å«ä¸€ä¸ªä¸­æ–‡é—®å¥½ã€‚;-)'
						return
					}
					this.answer = 'æ€è€ƒä¸­ğŸ¤”...'
					var vm = this
					axios.get('https://yesno.wtf/api').then(function (response) {
						vm.answer = _.capitalize(response.data.answer)
						vm.ansImageUrl = response.data.image
					}).catch(function (error) {
						vm.answer = 'é”™è¯¯ï¼APIæ— æ³•å¤„ç†ã€‚' + error
					})
				}
			},
			watch: {
				// firstName: function (val) {
				// 	this.fullName = val + ' ' + this.lastName
				// },
				// lastName: function (val) {
				// 	this.fullName = this.firstName + ' ' + val
				// },
				question: function (newQuestion, oldQuestion) {
					this.answer = "ç­‰å¾…è¾“å…¥åœæ­¢ã€‚ã€‚ã€‚"
					this.debouncedGetAnswer()
				}
			},
			created: function () {
				this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)
			}
		})
	</script>

</body>
</html>